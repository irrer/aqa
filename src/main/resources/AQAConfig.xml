<?xml version='1.0' encoding='utf-8'?>

<!-- Development Configuration for AQA.
Note that when building a package for release, the Maven build process uses the AQAConfigProd.xml file. -->

<AQAConfig>
    <!-- Database parameters. -->
    <SlickDbsDefaultDbUrl HostIp='141.214.125.209'>jdbc:postgresql://141.214.125.209:5432/AQATest</SlickDbsDefaultDbUrl>
    <SlickDbsDefaultDriver>slick.driver.PostgresDriver$</SlickDbsDefaultDriver>
    <SlickDbsDefaultDbDriver>org.postgresql.Driver</SlickDbsDefaultDbDriver>

    <!-- Port number for the Secure ReST service.   Port 443 is the default for HTTPS.
    If this is missing or commented out, then the server will instead use HTTP on port 80.   Alternately,
    if this is specified, then the JavaKeyStoreFileList and JavaKeyStorePassword must be given. -->
    <!-- <HTTPSPort>9443</HTTPSPort> -->

    <!-- Location of file that contains Java Key Store for HTTPS.  If multiple names are given, then they are
    each tried in the order given until a readable file is found. -->
    <JavaKeyStoreFileList>
        <JavaKeyStoreFile>keystore.jks</JavaKeyStoreFile>
        <JavaKeyStoreFile>C:\Program Files\UMRO\keystore.jks</JavaKeyStoreFile>
        <JavaKeyStoreFile>src\main\resources\keystore.jks</JavaKeyStoreFile>
    </JavaKeyStoreFileList>

    <!-- The password to access the Java Key Store file. -->
    <JavaKeyStorePassword>9c067233b07c7b04025989a197fad9b12cf4c19006678e2b18b121289bd1635a2d395a603122a6e6
    </JavaKeyStorePassword> <!-- rodicom11dev -->
    <!-- <JavaKeyStorePassword>44d18166c66bed60b6394e6625c63dea713dbe465ddc960a7cd109514bc0d2bd</JavaKeyStorePassword> -->     <!-- irrer -->

    <!-- Directory containing executables and configuration files to run procedures. -->
    <ProgramDir>C:\Program Files\AQA</ProgramDir>

    <!-- Directory containing procedures' executable code. -->
    <ProcedureDir>D:\AQA_Procedures</ProcedureDir>

    <!-- Directory containing input and output data consumed by and produced by procedures. -->
    <DataDir>D:\AQA_Data</DataDir>

    <!-- Authentication timeout.  Number of seconds for a user id+password pair to be cached before re-checking with database. -->
    <AuthenticationTimeout>7200.0</AuthenticationTimeout>

    <!-- Time of day as hours and minutes (HH:MM) that program will restart
    itself. This is done to avoid errors that build up over time.  The time is
    formatted as a 24 hour clock, so 23:00 is eleven PM. -->
    <RestartTime>3:10</RestartTime>

    <!-- List of users that should have permissions to everything. -->
    <UserWhiteList>
        <User>irrer</User>
        <User>jmmoran</User>
        <User>jmmoran</User>
        <User>jusmikel</User>
    </UserWhiteList>

    <!-- Logging level for Restlet.  Messages at or above this severity level will be logged.
    Possible values are: OFF FINE FINER FINEST INFO WARNING SEVERE ALL -->
    <RestletLogLevel>WARNING</RestletLogLevel>

    <!-- Terms of use for this service (legal). -->
    <TermsOfUse>
        Terms Of Use

        To Be Determined
    </TermsOfUse>

    <!-- Maximum amount of time in minutes that a procedure should take.  This is used when
    examining the input files to determine if they are from different sessions. -->
    <MaxProcedureDuration>120.0</MaxProcedureDuration>

    <!-- List of categories of maintenance, as referenced in the PMI database table.  If a category is in
        the database whose name does not match one of these, then the first category is used as a default.
        
        Name: Unique name of the category
        
        Color: Color in which the category is to be displayed.  Format is web based, so examples are '#00ff00' for green or 'blue' for blue.
        
        The content of the category element is free text that describes the category.
        -->
    <MaintenanceCategoryList>
        <MaintenanceCategory Name='Maintenance'            Color='#aaaaaa'   >General Maintenance</MaintenanceCategory>
        <MaintenanceCategory Name='PMI'                    Color='#80FF9F'   >Preventive Maintenance Inspection</MaintenanceCategory>
        <MaintenanceCategory Name='Set Baseline'           Color='lightgreen'>New baseline values set</MaintenanceCategory>
        <MaintenanceCategory Name='Firmware Update'        Color='#33aa33'   >New treatment machine firmware</MaintenanceCategory>
        <MaintenanceCategory Name='Mechanical Jaws'        Color='#aa3322'   >Maintenance performed on jaws</MaintenanceCategory>
        <MaintenanceCategory Name='Mechanical Collimator'  Color='#aa3322'   >Maintenance performed on Collimator</MaintenanceCategory>
        <MaintenanceCategory Name='Mechanical Gantry'      Color='#aa3322'   >Maintenance performed on Gantry</MaintenanceCategory>
        <MaintenanceCategory Name='Electrical'             Color='#aa3322'   >Maintenance performed due to electrical issue(s)</MaintenanceCategory>
    </MaintenanceCategoryList>

    <!-- List of beam names used by Phase2 MetadataCheck -->
    <MetadataCheckBeamNameList>
        <!-- 
        <BeamName>J10G0C270-6X</BeamName>
        <BeamName>T2 Open</BeamName>
        <BeamName>J10G270</BeamName>
        <BeamName>T3 Open</BeamName>
         -->
        <BeamName>J10G0C90-6X</BeamName>
        <BeamName>J10G0C90EDW45-6X</BeamName>
        <BeamName>J10G0C270-6X</BeamName>
        <BeamName>J24G0C270-6X</BeamName>
        <BeamName>Flood 6X</BeamName>
        <BeamName>J20G0-6X</BeamName>
        <BeamName>J20G0-10X</BeamName>
        <BeamName>J20G0-10F</BeamName>
        <BeamName>J20G0-16X</BeamName>
        <BeamName>MABG0</BeamName>
        <BeamName>PF Stat 0</BeamName>
        <BeamName>T2 Open</BeamName>
        <BeamName>J10G180</BeamName>
        <BeamName>PF Stat 180</BeamName>
        <BeamName>T2-DG-RS</BeamName>
        <BeamName>T3 Open</BeamName>
        <BeamName>J10G90</BeamName>
        <BeamName>J10G270</BeamName>
        <BeamName>MABG90</BeamName>
        <BeamName>PF Stat 90</BeamName>
        <BeamName>T3MLCSpeed</BeamName>
        <BeamName>T1 PF ARC ERROR</BeamName>
        <BeamName>PF Stat 270</BeamName>
        <BeamName>T1 PF ARC</BeamName>
        
    </MetadataCheckBeamNameList>

    <!-- Beam name for flood field. -->
    <FloodFieldBeamName>Flood 6X</FloodFieldBeamName>

    <!-- The maximum error tolerated for CollimatorCentering in mm. -->
    <CollimatorCenteringTolerence_mm>2.0</CollimatorCenteringTolerence_mm>
    
    <!-- Beam names used by Phase2 CollimatorCentering -->
    <!-- 
    <CollimatorCentering090BeamName>J10G90</CollimatorCentering090BeamName>
    <CollimatorCentering270BeamName>J10G270</CollimatorCentering270BeamName>
    -->
    <CollimatorCentering090BeamName>J10G0C90-6X</CollimatorCentering090BeamName>
    <CollimatorCentering270BeamName>J10G0C270-6X</CollimatorCentering270BeamName>
    <!-- Width of band of pixels in mm to use for initial finding of edge. -->
    <CollimatorCenteringCoarseBandWidth_mm>5.0</CollimatorCenteringCoarseBandWidth_mm>
    <!-- Thickness in mm of the penumbra of an edge. -->
    <PenumbraThickness_mm>10.0</PenumbraThickness_mm>
    <!-- Number of pixels per million to use as the sets of largest and smallest pixels in
    the image.   These pixels are selected after bad pixels have been removed.  -->
    <PenumbraPlateauPixelsPerMillion>500</PenumbraPlateauPixelsPerMillion>

    <!-- Percent value of penumbra that is considered to be the actual edge of the collimator or jaw.  -->
    <PenumbraThresholdPercent>80.0</PenumbraThresholdPercent>

    <!-- An maximum estimate of how many bad pixels (integer >= 0) to expect per million pixels.  A good
    estimate can marginally improve results, but a bad estimate will probably still be acceptable. -->
    <MaxEstimatedBadPixelPerMillion>20</MaxEstimatedBadPixelPerMillion>

    <!-- The number of 'normal' pixels to use to characterize pixels. -->
    <BadPixelSamplePerMillion>250</BadPixelSamplePerMillion>

    <!-- Number of standard deviations that a pixel must be from it's 8 neighbors to be considered a bad pixel. -->
    <BadPixelStdDev>3.0</BadPixelStdDev>
    
    <!-- Maximum number of bad pixel tolerated before considering the image to be of such poor quality that it should be rejected for processing.  Must be a positive integer. -->
    <MaxAllowedBadPixelsPerMillion>50</MaxAllowedBadPixelsPerMillion>
    
    <!-- Use pixels this many mm square to find and correct bad pixels.  This is used both in the determination of whether a pixel is bad by
    defining it's neighborhood size, and determining replacement values for bad pixels. -->
    <BadPixelRadius_mm>3.5</BadPixelRadius_mm>

    <!-- When determining whether or not a pixel is bad, require it to be at this many CU's different than it's neighbors' average.   This is
    an absolute value (not a percent) and is a floating point number.-->
    <BadPixelMinimumDeviation_CU>10.0</BadPixelMinimumDeviation_CU>

    <!-- When determining whether or not a pixel is bad, require there to be pixel values within this percent of each other.-->
    <BadPixelMaximumPercentChange>10.0</BadPixelMaximumPercentChange>

    <!-- Radius in mm (floating point) centered in an image defining the pixels to be used to determine dose. -->
    <CenterDoseRadius_mm>5.0</CenterDoseRadius_mm>

    <!-- Number of historical entries to show in the HTML page.  Must be integer value 1 or greater. -->
    <CenterDoseReportedHistoryLimit>50</CenterDoseReportedHistoryLimit>

    <!-- List of beam names of that can be used to record dose at the center of the image. -->
    <CenterDoseBeamNameList>
        <BeamName>Flood 6X</BeamName>
        <BeamName>J10G180</BeamName>
        <BeamName>J10G90</BeamName>
        <BeamName>T2 Open</BeamName>
        <BeamName>J20G0-6F</BeamName>
        <BeamName>J10G0C270-6X</BeamName>
        <BeamName>J20G0-6X</BeamName>
        <BeamName>J20G0-16X</BeamName>
        <BeamName>T3 Open</BeamName>
        <BeamName>J10G0C90-6X</BeamName>
        <BeamName>J10G0C90EDW45-6X</BeamName>
    </CenterDoseBeamNameList>
    
    <!-- Allowed error in mm when measuring collimator positions measured in the image to planned positions. -->
    <CollimatorPositionTolerance_mm>2.0</CollimatorPositionTolerance_mm>
    
    <!-- List of beam names of that to be used to evaluation the accuracy of the collimator position.  If true, the 
    FloodCompensation attribute specifies that the image pixels should be divided by their respective pixels in the
    flood field, normalizing the dose across the field.  This can not be done for some images because their edges overlap
    with the flood field edges.
    -->
    <CollimatorPositionBeamList>
        <BeamName FloodCompensation='true'>J10G180</BeamName>
        <BeamName FloodCompensation='false'>J10G180</BeamName>

        <BeamName FloodCompensation='true'>J10G90</BeamName>
        <BeamName FloodCompensation='false'>J10G90</BeamName>

        <BeamName FloodCompensation='true'>J10G0C270-6X</BeamName>
        <BeamName FloodCompensation='false'>J10G0C270-6X</BeamName>

        <BeamName FloodCompensation='true'>J10G0C90-6X</BeamName>
        <BeamName FloodCompensation='false'>J10G0C90-6X</BeamName>

        <BeamName FloodCompensation='true'>J10G270</BeamName>
        <BeamName FloodCompensation='false'>J10G270</BeamName>

        <BeamName FloodCompensation='false'>J20G0-10X</BeamName>
        <BeamName FloodCompensation='false'>J20G0-16X</BeamName>
        <BeamName FloodCompensation='false'>J20G0-6X</BeamName>

        <BeamName FloodCompensation='false'>T2 Open</BeamName>
        <BeamName FloodCompensation='false'>T3 Open</BeamName>
    </CollimatorPositionBeamList>

    <!-- The thickness of the band in mm in the isoplane across the center of the image used for drawing the wedge profile. -->
    <WedgeProfileThickness_mm>5.0</WedgeProfileThickness_mm>

    <WedgeBeamList>
        <BeamName background="J10G0C90-6X">J10G0C90EDW45-6X</BeamName>
        <BeamName background="J20G0C90-6X">J20G0C90EDW60-6X</BeamName>
    </WedgeBeamList>

    <!-- Diameter of sample spots in mm. -->
    <SymmetryAndFlatnessDiameter_mm>5.0</SymmetryAndFlatnessDiameter_mm>

    <!-- Maximum allowed value for difference in both axial and transverse symmetry from baseline in percent. -->
    <SymmetryPercentLimit>2.0</SymmetryPercentLimit>

    <!-- Maximum allowed value for difference in flatness from baseline in percent. -->
    <FlatnessPercentLimit>2.0</FlatnessPercentLimit>
    
    <!-- Maximum allowed value for difference in profile constancy from baseline in percent. -->
    <ProfileConstancyPercentLimit>2.0</ProfileConstancyPercentLimit>

    <SymmetryAndFlatnessBeamList>
        <BeamName>Flood 6X</BeamName>
        <BeamName>J20G0-6X</BeamName>
        <BeamName>J20G0-6F</BeamName>
        <BeamName>J20G0-10X</BeamName>
        <BeamName>J20G0-10F</BeamName>
        <BeamName>J20G0-16X</BeamName>
    </SymmetryAndFlatnessBeamList>

    <!-- Coordinates of centers of sampling points.  All are in mm, relative to the center of the image, and in the isoplane. -->
    <SymmetryAndFlatnessPointList>
        <SymmetryAndFlatnessPoint name='Top'       x_mm=  '0.0'   y_mm= '-75.0'/>
        <SymmetryAndFlatnessPoint name='Bottom'    x_mm=  '0.0'   y_mm=  '75.0'/>
        <SymmetryAndFlatnessPoint name='Left'      x_mm='-75.0'   y_mm=   '0.0'/>
        <SymmetryAndFlatnessPoint name='Right'     x_mm= '75.0'   y_mm=   '0.0'/>
        <SymmetryAndFlatnessPoint name='Center'    x_mm=  '0.0'   y_mm=   '0.0'/>
        <!--
        <SymmetryAndFlatnessPoint name='Energy 1'  x_mm='-37.5'   y_mm=   '0.0'/>
        <SymmetryAndFlatnessPoint name='Energy 2'  x_mm= '37.5'   y_mm=   '0.0'/>
        <SymmetryAndFlatnessPoint name='Energy 3'  x_mm=  '0.0'   y_mm= '-37.5'/>
        <SymmetryAndFlatnessPoint name='Energy 4'  x_mm=  '0.0'   y_mm=  '37.5'/>
        -->
    </SymmetryAndFlatnessPointList>

    <SymmetryPointCenter  name='Center'/>
    <!-- Names of opposing points (see <SymmetryAndFlatnessPointList>) used to calculate symmetry. -->
    <SymmetryPointTop     name='Top'/>
    <SymmetryPointBottom  name='Bottom'/>
    <SymmetryPointLeft    name='Left'/>
    <SymmetryPointRight   name='Right'/>

</AQAConfig>
