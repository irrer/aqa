<div title="Series Maker">
    <!--
    Copyright 2024 Regents of the University of Michigan

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
    -->

    <h2>@@title@@</h2>

    <p>
        Treatment machine dev (development) mode allows greater latitude in setting machine parameters. However, RTIMAGE
        files
        captured in dev mode lack some metadata (such as references to a plan, plan beam, and identity of the
        treatment machine) that the AQA platform requires.
    </p>
    <p>
        The Series Maker allows you to convert these files into fully defined DICOM series that can be analyzed on the
        AQA platform.
    </p>

    <h3>Using Series Maker</h3>

    <p>
        From the home page, click the <!--suppress HtmlUnknownTarget -->
        <a href="/SeriesMaker" target="_blank">Series Maker</a> link. This will show the
        upload page:
    </p>

    <p style="margin-top: 30px">
        <a href="Upload.png" style="border:1px gray;margin:10px;" target="_blank">
            <img src="Upload.png" style="margin:5px; border: 1px solid lightgray;width:600px;"
                 alt="Screen Shot of Upload Interface"/>
        </a>
    </p>

    <p>
        Three types of DICOM files are needed to construct a new series:
    </p>
    <ol>
        <li style="margin:15px;">
            <b>Source Image:</b>
            Uploaded by user, and provide the pixels for analysis. They can be any combination of dev and production
            images.
        </li>

        <li style="margin:15px;">
            <b>Plan:</b>
            Exactly one plan must be specified. This can be done either explicitly by uploading the plan with the
            images, or
            implicitly by uploading at least one production image that references a plan.
        </li>

        <li style="margin:15px;">
            <b>Template:</b>
            These are production images that provide the DICOM metadata required to fill in the information missing in
            dev images. They are either uploaded by the user, or, are automatically extracted from the AQA database from
            a previous analysis via their plan reference.
        </li>
    </ol>


    <p>
        From the home page, click the <!--suppress HtmlUnknownTarget --><a href="/SeriesMaker" target="_blank">Series
        Maker</a> link.
    </p>

    <p>
        <b>Note: </b>It is recommended that before making series, that at least one set of production images be
        delivered and analyzed. This provides a default set of template images for the subsequent dev images.
    </p>

    <h4>Step 1: Upload Image Files</h4>
    <p>
        Drag and drop the image files and optionally a plan file. Click 'Next' and a page similar to the one below will
        be shown:
    </p>

    <p style="margin-top: 30px">
        <a href="AfterNext.png" style="border:1px gray;margin:10px;" target="_blank">
            <img src="AfterNext.png" style="margin:5px; border: 1px solid lightgray;width:1000px;"
                 alt="Screen Shot of Interface"/>
        </a>
    </p>

    <h4>Step 3: Drag and Drop</h4>
    <p>
        Image files are listed on the left, grouped by series. Open slots for plan beams are on the right. Drag the
        desired image into the appropriate plan beam slot.
    </p>
    <ul>
        <li> It is not necessary to fill all slots.</li>
        <li> Images do not need to be slotted in chronological order.</li>
    </ul>

    <h4>Step 2: Set parameters</h4>

    <p>
        Set the machine to the one that the image files were delivered on. The machine does not need to match the plan's
        machine.
    </p>

    <p>
        The 'Download File' is the name that will be given to the downloaded zip file. If helpful, change it to
        something that describes the data set.
    </p>

    <p>
        Change the patient name and ID if appropriate. Often these reflect the machine name.
    </p>

    <h4>Step 4: Download</h4>
    <p>
        Clicking the 'Download' button will make the series and download it to your computer as a zip file.
    </p>

    <h4>Step 5: Run (Optional)</h4>
    <p>
        The zip file can be run on AQA directly (without extracting it). Click the <!--suppress HtmlUnknownTarget --><a
            href="/run/WebRunIndex">Run
        Procedure</a> link and then the appropriate procedure. You can then drag and drop the zip file into the web
        interface and click 'Run'.
    </p>

    <!-- ========================================================================================================== -->

    <hr style="margin-top:100px;margin-bottom:20px;"/>
    <h3>Detailed List of DICOM Metadata Processing</h3>

    <p>
        See: <a href="DicomMetadataSpecifics.html">DICOM Metadata Specifics</a>
    </p>

    <!-- ========================================================================================================== -->

    <hr style="margin-top:100px;margin-bottom:20px;"/>
    <h3>Detailed Description of RTIMAGE List</h3>

    <p>
        Within each series, the images are sorted in the order they were acquired. Each item represents an image and has
        the following information:
    <ul>
        <li>
            The number of the image within the series (ordered by acquisition time).
        </li>
        <li>
            The beam name, or, for dev images, the gantry angle, collimator angle, and energy.
        </li>
        <li>
            The capture time since the start of the series. The first will always have the time '00:00'.
        </li>
        <li>
            A thumbnail image of the RTIMAGE. Hovering the mouse over this will display a full sized image. Each image
            is annotated with an MD5 hash of the bytes of the image bytes. This can be useful for determining if two
            images are the same or not.
        </li>
        <li>
            The name of the file (minus any '.dcm' extension). For screen space reasons, long file names will be
            abbreviated using only the last characters of the name. Hovering the mouse over the file name will display
            the full name.
        </li>
    </ul>

    <p style="margin-top: 30px">
        <a href="RtimageDetails.png" style="border:1px gray;margin:10px;" target="_blank">
            <img src="RtimageDetails.png" style="margin:5px; border: 1px solid lightgray;"
                 alt="Details of RTIMAGE fields."/>
        </a>
    </p>

    <!-- ======================================= -->

    <!-- End of page spacer. -->
    <p style="margin:200px;">

    </p>


    <!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
    <!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->

</div>
