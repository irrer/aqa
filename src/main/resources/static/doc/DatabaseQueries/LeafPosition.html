<div title="Leaf Position Database Query" class="col-md-8 col-md-offset-1">
    <!--
    Copyright 2021 Regents of the University of Michigan

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
    -->

    <h2>@@title@@</h2>
    <p>
        Refer to the <a href="../LeafPosition/index.html">Leaf Position</a> user guide for background
        information.
    </p>
    <p>
        Currently there are are over 2 million rows in this table, so the quantity of data in a single query should be
        restricted by adding a <b>WHERE</b> clause.
    </p>
    <pre>
        &nbsp;
        SELECT
          "institution"."name",
          "machine"."id",
          "machineType"."model",
          "multileafCollimator"."model",
          "output"."dataDate",
          "leafPosition"."beamName",
          "leafPosition"."leafIndex",               -- leaf number starting at 1
          "leafPosition"."leafPositionIndex",       -- leaf position number as it moves across the field.  This will be a number from 1 to 10.
          "leafPosition"."offset_mm",               -- difference from expected location: measuredEndPosition_mm - expectedEndPosition_mm
          "leafPosition"."measuredEndPosition_mm",  -- measured position of leaf end
          "leafPosition"."expectedEndPosition_mm",  -- expected position of leaf end
          "leafPosition"."measuredLowSide_mm",      -- measured position of top side of leaf
          "leafPosition"."measuredHighSide_mm"      -- measured position of bottom side of leaf
		FROM
          public."leafPosition",
          public."institution",
          public."machine",
          public."machineType",
          public."multileafCollimator",
          public."output"
        WHERE
              ("leafPosition"."outputPK" = "output"."outputPK")
          AND ("output"."machinePK" = "machine"."machinePK")
          AND ("machine"."institutionPK" = "institution"."institutionPK")
          AND ("machine"."machineTypePK" = "machineType"."machineTypePK")
          AND ("machine"."multileafCollimatorPK" = "multileafCollimator"."multileafCollimatorPK")
        ORDER BY
          "machine"."id",
          "output"."dataDate",
		  "leafPosition"."leafIndex",
		  "leafPosition"."leafPositionIndex"
        ASC LIMIT 10;
    </pre>

</div>
